<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_light</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_player</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.drama_ready=1
make_hover_tips()

global.enemy_paused=0
global.view_w_target=view_wview[0]
global.view_h_target=view_hview[0]
global.view_w_start=view_wview[0]
global.view_h_start=view_hview[0]


global.boss_bar_xx=display_get_gui_width()/2
global.boss_hp=100
global.hue=0
depth_timer=0
/////*
_screen = -1;
_modeColor = true;
_pixelScale = 2.0;
_roundnessScale = 0.5;
_roundnessExtraScale = 0.65;
_toonLevels = 16;

/////*

pause_timer=0
surface_step=0
bos=0//for bosses
if room=room_title
{audio_group_set_gain(audiogroup_default, 0.1, 1);}
else
{audio_group_set_gain(audiogroup_default, 1, 500);}

alarm[7]=45//progress meter
global.rage_on=0

if room=room_level_tut
{
if global.skip_tut=1{alarm[2]=1}
}

if room!=room_title
{
if surface_exists(global.light_surface){surface_free(global.light_surface)}
if surface_exists(global.light_surface2){surface_free(global.light_surface2)}
}

activate_tick=0

//instance_create(0,0,gore_controller)

//global.screen_shot=0
global.max_enemies=2

power_alpha=1

global.gui_w=1024*1
global.gui_h=576*1
display_set_gui_size(global.gui_w,global.gui_h);


global.blood_alpha=0
global.blood_image=0
global.power_ready=0
instance_create(x,y,sleeper)
//instance_create(0,0,shade)
alarm[0]=15
//
back=choose(1,2)
power_timer=0
global.cheat=0
global.cheat_string=""

/*
if global.usedaheart=0
{
if global.level_im_on&gt;5
{
if global.hat_unlocked[8]=0
{
global.hat_unlocked[8]=1

}
global.usedaheart=1
}
}
*/

if room=room_level_lab{

global.darkness=choose(32,64,70,80)
if global.fancy=1{global.fancy_worked=1}


bt=instance_create(0,0,drama_filter)

if global.level_im_on=11 {background_visible[3]=false  instance_create(0,0,boss)}else{background_visible[3]=false}
}

if room=room_level_boss
{
bt=instance_create(0,0,drama_filter)
if global.level_im_on=12
{
instance_create(0,0,final_boss)
background_visible[0]=false
background_visible[1]=false
background_visible[2]=false
background_visible[3]=false
}
else
{

bi=0
do
{
bdone=0
bos=choose(0,1,2,3)
bi+=1
}until(((bos !=global.boss_fight[0])and (bos !=global.boss_fight[1]) and (bos !=global.boss_fight[2]) and (bos !=global.boss_fight[3]))or(bi&gt;1000))

if global.boss_fight[0] =-1 {global.boss_fight[0]=bos bdone=1}
if bdone=0{ if global.boss_fight[1] =-1 {global.boss_fight[1]=bos bdone=1}}
if bdone=0{if global.boss_fight[2] =-1 {global.boss_fight[2]=bos bdone=1}}
if bdone=0{if global.boss_fight[3] =-1 {global.boss_fight[3]=bos bdone=1}}

if bos=0
{
instance_create(0,0,boss)
bt.txt = "Boss: Fleshwall"
}

if bos=1
{
instance_create(400,128,bigbot)
bt.txt = "Boss: FlameBot"
}

if bos=2
{
instance_create(400,128,boss3)
bt.txt = "Boss: Spinner"
}

if bos=3
{
instance_create(400,128,boss4)
bt.txt = "Boss: Spider"
}
}

}

if room=room_level_safezone{
t=instance_create(0,0,drama_filter)
t.txt="Safe zone"
if global.level_im_on=12 {room_goto(room_died)}
}



if room != room_title
{
//if global.biome=0
//{
background_index[2]=bk_square1
background_index[1]=bk_square2
background_index[0]=bk_square3
//
}
/*
if global.biome=1
{
background_index[2]=bk_triangle1
background_index[1]=bk_triangle2
background_index[0]=bk_triangle3
}

if global.biome=2
{
background_index[2]=bk_supply1
background_index[1]=bk_supply2
background_index[0]=bk_supply3
}
if global.biome=3
{
background_index[2]=bk_br1
background_index[1]=bk_br2
background_index[0]=bk_br3
}
}
*/
back_X=0
alarm[1]=5
rr=0
draw=0
global.quality=1.0 //smaller is better. 0.5 -&gt; 2.0 would be a good range.
//Due to soem tricky (or just bad) math, some values may cause an error
//It involves 
i=0
light_int()
global.darkness=128 -(global.level_im_on*8)//64// default for the int script is 10 Larger number=Brighter
if global.darkness&lt;60{global.darkness=60}
global.debug=false

global.debug=false
save_game()
global.dead=0
global.paused=0
global.sound_x=0
global.sound_y=0
global.sound_z=0

alarm[0]=1
//instance_create(0,0,onscreen_joystick)
instance_create(0,0,controller_support)

//instance_create(0,0,aim_joystick)
//instance_create(0,0,jump_button)
//instance_create(0,0,shoot_button)
global.down_pressed=0
global.up_pressed=0
global.left_pressed=0
global.right_pressed=0

global.jump_pressed=0
global.shoot_pressed=0



global.aim_left=0
global.aim_right=0
global.aim_up=0
global.aim_down=0
//instance_create(0,0,light_controler)

global.leveldone=0

xp_bar=0

global.x_wind=-3
global.y_wind=0


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>surface_free(global.light_surface)
surface_free(global.light_surface2)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if room=room_level_lab{instance_create(0,0,progress)}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_goto(room_level_boss)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0,0,dead_room_controler)
//room_goto(room_died)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>


save_game()
global.level_im_on=12
room_goto(room_level_boss)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>


save_game()
global.level_im_on+=1 
room_goto(room_level_boss)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
/*
global.boss_beat0=0
global.boss_beat1=0
global.boss_beat2=0
global.boss_beat3=0
*/


if room=room_title{exit}
if room=room_level_preboss{ room_goto(room_level_boss) exit}
if room=room_level_arcade
{
alarm[5]=120
exit
}

if room=room_level_boss
{
if global.dead=0
{

if global.level_im_on=12 
{
global.biome=0
global.boss_beat0=0
global.boss_beat1=0
global.boss_beat2=0
global.boss_beat3=0
global.boss_fight[0]=-1
global.boss_fight[1]=-1
global.boss_fight[2]=-1
global.boss_fight[3]=-1
global.level_im_on=1
global.loops+=1
room_goto(room_level_lab) 

exit}
room_goto(room_level_afterboss)
}
else
{
alarm[5]=120
}
exit
}

if room=room_level_afterboss
{
global.biome+=1
global.level_im_on=1
global.loops+=1
room_goto(room_level_lab)
//instance_create(0,0,dead_room_controler) 
exit
}


if ((room=room_level_lab)or(room=room_level_boss))
{



save_game()
if global.dead=0
{
//if ((global.my_min=0) and (global.my_sec&lt;30)){if global.level_im_on&gt;2{global.gun_unlocked[6]=1}}
global.level_im_on+=1 
global.hardness-=1 
if global.hardness&lt;90{global.hardness=90}
global.rooms_needed+=0.5
if global.rooms_needed&gt;25{global.rooms_needed=25}
 
room_goto(room_level_safezone)
}
else
{
alarm[5]=180 
}
}
else
{
if global.level_im_on=5{  room_goto(room_level_preboss)}
else{  room_goto(room_level_lab)}


}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>play_music()
rr=1 //used for ESC press only
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if room=room_level_lab
{

repeat(50)
{
instance_create(0,0,decor)
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.light_engine_enabled=false{exit}


if surface_step=0
{
do_surfaces()
surface_step=1
}
else
{
surface_step=0
do_surfaces()
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///depth=1000

set_hover_text()
view_wview[0]-=(view_wview[0]-global.view_w_target)/100
view_hview[0]-=(view_hview[0]-global.view_h_target)/100
background_stuff()

global.hue+=5
if global.hue&gt;255{global.hue=0}

if global.god_mode=1 
    {
    global.life=100
    }

if room=room_level_boss
    {
    global.darkness=128
    }
else
    {
    global.darkness=128 -(global.level_im_on*8)//64// default for the int script is 10 Larger number=Brighter
    if global.darkness&lt;60{global.darkness=60}
    }
    
if global.stache_power_not_ready&gt;0
    {
    global.stache_power_not_ready-=1
    }
    
    
    
activate_tick+=1
if pause_timer&gt;0{pause_timer-=1}
if keyboard_check_pressed(vk_escape){game_pause()}
if room!=room_guns{if global.pause_pressed{game_pause()}}
if ((keyboard_check_pressed(ord('Q')))or(global.special_pressed=1)){activate_stache_power()}

if global.screen_shot=1
{
if keyboard_check_pressed(vk_lshift)
{
if global.slowmo=1
{
global.slowmo=0
room_speed=60
}
else
{
global.slowmo=1
room_speed=30
}
}
}
else
{
if global.slowmo=1
{
global.slowmo=0
room_speed=60
}
}



if room=room_level_arcade{arcade_spawns()}

if room=room_level_boss{
//global.rage=0
global.rage_on=0
}

if global.money&gt;99999{global.money=99999}
if global.total_money_life&gt;99999{global.total_money_life=99999}
power_timer+=1


if global.rage_on=1
{
if global.perk3=4{global.rage-=0.05}else{global.rage-=0.1}

//if instance_exists(player){repeat(5){t=instance_create(player.x,player.y,dust) t.image_blend=choose(c_red,c_fuchsia, c_white) t.depth=100}}


}


if global.rage&lt;100
{
if global.rage_on=0{global.beard_color=c_black}
global.power_ready=0
if ((room != room_level_safezone) and (room !=room_level_boss)) {if global.paused=0{global.rage-=0.0}}
if global.rage&lt;0{global.rage=0 if global.rage_on=1{ play_music() global.rage_on=0}}
}
else
{
if global.power_ready=0 {if power_timer&gt;100{global.power_ready=1 t=instance_create(x,y,drama_filter) t.txt="Stache Power Ready!"}}
global.rage=100
global.beard_color=make_color_hsv(global.hue,255,255)
if random(10)&gt;5{if instance_exists(player){t=instance_create(player.x,player.y,dust) t.image_blend=choose(c_yellow,c_lime, c_white)}}
}



if global.rage_on=1
{
if instance_exists(player)
{
if global.gun=0 {if player.shot_timer&gt;2{player.shot_timer=3}} //pistol
if global.gun=1 {if player.shot_timer&gt;5{player.shot_timer=5}} // shotgun
if global.gun=2 {if player.shot_timer&gt;2{player.shot_timer=3}} //smg
if global.gun=3 {} //rocket
if global.gun=4 {if player.shot_timer&gt;2{player.shot_timer=3}} //ar 
if global.gun=5 {} //railgun
if global.gun=6 {} //flames
if global.gun=7 {if player.shot_timer&gt;2{player.shot_timer=3}} //HMG
if global.gun=8 {}// atom gun
if global.gun=9 {} //rocket 2
if global.gun=10 {} //grenade
if global.gun=11 {} //railgun2
if global.gun=12 {} //e pistol
if global.gun=13 {} //sword
if global.gun=14 {} //water
if global.gun=15 {} //rocket 3
if global.gun=16 {}//wifi
if global.gun=17 {}//
if global.gun=18 {if player.shot_timer&gt;5{player.shot_timer=5}}//revolver


if ((global.ammo_per_gun[global.inventory_selected]&gt;0)or(global.inventory_selected=0))
{
global.slot_ammo[global.inventory_selected]=100 
}

global.ammo=100
}

}



global.x_wind+=0.1*choose(1,-1)
if global.x_wind&lt;-5{global.x_wind=-5}
if global.x_wind&gt;5{global.x_wind=5}
back_X+=global.x_wind/10
if random(100)&gt;90{instance_create((view_xview[0]+random(view_wview[0]*2))-(view_wview[0]/2),view_yview[0]-32,pixel_flip)}


if room=room_title{exit}



if instance_exists(player)
{
draw=1
x=player.x
y=player.y
if random(10)&gt;8{if global.life&lt;21{i=instance_create(player.x-10+random(20),player.y-10+random(20),blood_jet)}}
//activate_stuff()
}

//instance_activate_object(dead_guy2)








if global.xp_i_have&gt;global.xp_i_need
{
global.xp_i_have=0
global.xp_level+=1
global.xp_i_need=50*(global.xp_level*0.7)
if instance_exists(player){if global.perk3=5{instance_create(player.x,player.y,explosion)} player.powerup=60 global.life=100 if global.life&gt;100{global.life=100} audio_play_sound(snd_levelup,5,0) t=instance_create(x,y,drama_filter) t.txt="Level Up" t.tcolor=c_yellow t.tscale=4
if global.xp_level=5{global.perk_picker=1  t.txt="Level 5 Reached"}
if global.xp_level=10{global.perk_picker=1 t.txt="Level 10 Reached"}
if global.xp_level=15{global.perk_picker=1 t.txt="Level 15 Reached"}

if global.xp_level=20{global.perk_picker=1  t.txt="Level 20 Reached"}
if global.xp_level=25{global.perk_picker=1 t.txt="Level 25 Reached"}
if global.xp_level=30{global.perk_picker=1 t.txt="Level 30 Reached"}
}

/*
if global.xp_level&gt;12
{
if global.hat_unlocked[4]=0
{
global.hat_unlocked[4]=1
global.hat_unlocked_new[4]=1
instance_create(0,0,unlocker)
}
}
*/


gun1_upgrades()
if instance_exists(player){player.level_up=30}
}
if instance_exists(player){
global.sound_x=player.x
global.sound_y=player.y
global.sound_z=0
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="55">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.screen_shot=0{exit}

screen_save("screenshot"+string(current_time)+".png" )


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//instance_create(0,0,time_stopper)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>surface_free(global.light_surface)
surface_free(global.light_surface2)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>surface_free(global.light_surface)
surface_free(global.light_surface2)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if instance_exists(dead_guy2){exit}
if global.screen_shot=1{exit}
if room=room_died{exit}
if room=room_title{exit}
if instance_exists(stache_level_meter){exit}

if draw=0{exit}
if global.xp_i_have&gt;0
xp_bar=(global.xp_i_have/global.xp_i_need)*100

if instance_exists(areyousure)=false
    {
    draw_life_ammo(2,global.gui_h-32)
    draw_rage_bar(378,global.gui_h-32)
    draw_exp_bar(652,global.gui_h-32)//386,8
    }
draw_sprite_ext(spr_perk_tile,global.perk1,24,88,2,2,0,c_white,1)
draw_sprite_ext(spr_perk2_tile,global.perk2,64,88,2,2,0,c_white,1)
draw_sprite_ext(spr_perk3_tile,global.perk3,104,88,2,2,0,c_white,1)

if room=room_level_boss
{
if global.boss_hp&gt;0
{


draw_sprite_ext(spr_boss_bar,0,global.boss_bar_xx,32,1,1,0,c_white,1)
draw_set_color(c_red)
draw_rectangle(global.boss_bar_xx-((global.boss_hp/100)*134),20,global.boss_bar_xx+((global.boss_hp/100)*134),44,0)
draw_set_color(c_white)

if instance_exists(final_boss)
{

if global.loops&gt;0
{
if global.biome=0{draw_sprite_text(global.boss_bar_xx,32,"Overmind "+string(global.loops+1),1,c_white,2)}
}
else
{
if global.biome=0{draw_sprite_text(global.boss_bar_xx,32,"Overmind",1,c_white,2)}
}

}
else
{
if bos=0{draw_sprite_text(global.boss_bar_xx,32,"Fleshwall",1,c_white,2)}
if bos=1{draw_sprite_text(global.boss_bar_xx,32,"FlameBot",1,c_white,2)}
if bos=2{draw_sprite_text(global.boss_bar_xx,32,"Spinner",1,c_white,2)}
if bos=3{draw_sprite_text(global.boss_bar_xx,32,"Spider",1,c_white,2)}
}
}
//
}


if ((global.perk1=50)and(global.perk2=50)and(global.perk3=50))
{
if global.stache_perk1&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk1,26,88,2,2,0,c_white,1)}
if global.stache_perk2&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk2,64,88,2,2,0,c_white,1)}
if global.stache_perk3&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk3,104,88,2,2,0,c_white,1)}
if global.stache_perk4&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk4,144,88,2,2,0,c_white,1)}
if global.stache_perk5&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk5,184,88,2,2,0,c_white,1)}
if global.stache_perk6&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk6,224,88,2,2,0,c_white,1)}
}
else
{
if global.stache_perk1&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk1,26,128,2,2,0,c_white,1)}
if global.stache_perk2&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk2,64,128,2,2,0,c_white,1)}
if global.stache_perk3&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk3,104,128,2,2,0,c_white,1)}
if global.stache_perk4&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk4,144,128,2,2,0,c_white,1)}
if global.stache_perk5&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk5,184,128,2,2,0,c_white,1)}
if global.stache_perk6&gt;-1{draw_sprite_ext(spr_perk4_tile,global.stache_perk6,224,128,2,2,0,c_white,1)}
}
draw_inv(8,8)





draw_set_color(c_white)





if ((room=room_level_lab)or(room=room_level_safezone))
{
//draw_money_bar(global.gui_w-256-160,0)//8,42
//TIMER ^^^^^^^^^^^
draw_set_halign(fa_right)
draw_sprite(spr_area_bar,0,global.gui_w,0)
draw_text(global.gui_w-12 -8,+8,string(global.loops+1)+" - "+string(global.level_im_on))
//draw_text(global.gui_w -8,+32,"Kills: "+string(global.total_kills))


}


if global.debug_fps=1
{
draw_set_halign(fa_right)
draw_text(global.gui_w-8,global.gui_h-64,"DEBUG MODE!  FPS: "+string(fps)+" / "+string(round(fps_real))+"  INSTANCES: "+string(instance_count))
}

if global.god_mode=1
{
draw_set_halign(fa_left)
draw_text(8,global.gui_h-64,"GOD MODE")
}

if global.cheat=1

{
global.cheat_string=keyboard_string
draw_sprite_text(0+global.gui_w/2,-16+global.gui_h/2,"Cheat code",1,c_red,4)
draw_sprite_text(0+global.gui_w/2,32+global.gui_h/2,global.cheat_string,1,c_white,3)

if keyboard_check_pressed(vk_enter)
{
global.cheat=0
if global.cheat_string="nextplease" {alarm[2]=2}

//if global.cheat_string="iwantlevel5" {global.level_im_on=5 if global.level_im_on&gt;10 {global.level_im_on=10} alarm[2]=2}

if global.cheat_string="healme" {global.life=100}
if global.cheat_string="cashmoney" {repeat(100) {instance_create(mouse_x,mouse_y,credit)}}
if global.cheat_string="greendots" {repeat(100) {instance_create(mouse_x,mouse_y,xp_orb)}}
if global.cheat_string="bosstime" {global.level_im_on=4 alarm[2]=2}
if global.cheat_string="moreguns" {instance_create(mouse_x,mouse_y,random_gun)}
if global.cheat_string="rip" {global.life=-1}
if global.cheat_string="wax" {g=instance_create(mouse_x,mouse_y,random_gun) g.image_single=96}
if global.cheat_string="ilikefire" {global.inventory_item[1]=6}
if global.cheat_string="kittycannon" {global.inventory_item[1]=90}
if global.cheat_string="debug" {if global.debug_fps=0{global.debug_fps=1 show_debug_overlay(true);}else{show_debug_overlay(false); global.debug_fps=0}}
if global.cheat_string="lights" {if global.debug=0{global.debug=1}else{global.debug=0}}
if global.cheat_string="moneylife" {show_message(string(global.total_money_life))}
if global.cheat_string="lessgore" {with(gore_controller){instance_destroy()}}
if global.cheat_string="openthis" {instance_create(mouse_x,mouse_y,weapon_crate2)}
if global.cheat_string="enemy1" {instance_create(mouse_x,mouse_y,enemy)}
if global.cheat_string="enemy2" {instance_create(mouse_x,mouse_y,science )}
if global.cheat_string="enemy3" {instance_create(mouse_x,mouse_y,chicken)}
if global.cheat_string="enemy4" {instance_create(mouse_x,mouse_y,enemy2)}
if global.cheat_string="enemy5" {instance_create(mouse_x,mouse_y,spider)}
if global.cheat_string="enemy6" {instance_create(mouse_x,mouse_y,eye_slime)}
if global.cheat_string="enemy7" {instance_create(mouse_x,mouse_y,crawler)}
if global.cheat_string="enemy8" {instance_create(mouse_x,mouse_y,swarm_master)}
if global.cheat_string="enemy9" {instance_create(mouse_x,mouse_y,giant_eye)}
if global.cheat_string="enemy10" {instance_create(mouse_x,mouse_y,turret)}
if global.cheat_string="enemy11" {instance_create(mouse_x,mouse_y,enemy_mother)}
if global.cheat_string="spintowin" {global.stache_tokens+=10}
if global.cheat_string="harder" {global.hardness-=10}
if global.cheat_string="levelup" {global.xp_i_have=global.xp_i_need+1}
if global.cheat_string="godmode" {global.god_mode=1}
if global.cheat_string="bigboss" {global.level_im_on=12 room_goto(room_level_boss)}
if global.cheat_string="boss1" {global.level_im_on=10 global.biome=0 room_goto(room_level_boss)}
if global.cheat_string="boss2" {global.level_im_on=10 global.biome=1 room_goto(room_level_boss)}
if global.cheat_string="boss3" {global.level_im_on=10 global.biome=2 room_goto(room_level_boss)}
if global.cheat_string="boss4" {global.level_im_on=10 global.biome=3 room_goto(room_level_boss)}
if global.cheat_string="droneget" {global.drone_have+=1 global.drone_ammo=1500}
if global.cheat_string="pickaperk" {global.perk_picker=1}
if global.cheat_string="lightson" {global.light_engine_enabled=true}
if global.cheat_string="lightsoff" {global.light_engine_enabled=false}
if global.cheat_string="wubsgames" {global.custom_beard=1 save_game() setup_beards()}
if global.cheat_string="fancy" {global.fancy=1}


if global.cheat_string="newhat" {

unlock_new_hat()

 //show_message("Added "+string(global.cos_unlocked[global.cos_total]))
}

if global.cheat_string="iwantitall" {
global.gun_unlocked[1]=1
global.gun_unlocked[2]=1
global.gun_unlocked[3]=1
global.gun_unlocked[4]=1
global.gun_unlocked[5]=1
global.gun_unlocked[6]=1
global.gun_unlocked[7]=1
global.gun_unlocked[8]=1
global.gun_unlocked[9]=1
global.gun_unlocked[10]=1
global.gun_unlocked[11]=1
global.gun_unlocked[12]=1
global.gun_unlocked[13]=1
global.gun_unlocked[14]=1
global.gun_unlocked[15]=1
global.gun_unlocked[16]=1
global.gun_unlocked[17]=1

global.hat_unlocked[1]=1
global.hat_unlocked[2]=1
global.hat_unlocked[3]=1
global.hat_unlocked[4]=1
global.hat_unlocked[5]=1
global.hat_unlocked[6]=1
global.hat_unlocked[7]=1
global.hat_unlocked[8]=1
save_game()
}

}


}

/*
nextplease - go to next level
healme - heals you
cashmoney -spawns 100x money at the mouse
greendots - spawns 100x exp at the mouse
bosstime - go to a boss
moreguns - drops a gun at the mouse
rip -suicide
wax - gives power up item (debug only)
ilikefire - gives flamethrtower
debug -shows fps info
lights - shows light primatives
moneylife - shows lifetime money



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
just_draw_surfaces()
    
    
if global.blood_alpha&gt;1{global.blood_alpha=1}
if global.life&gt;20
{
if global.blood_alpha&gt;0{global.blood_alpha-=0.03}
}
else
{
if global.blood_image &gt;2{global.blood_image=choose(0,1,2)}
global.blood_alpha=1
}
draw_sprite_ext(spr_blood_overlay,global.blood_image,view_xview[0],view_yview[0],1,1,0,c_white,global.blood_alpha)
//draw_sprite(spr_mouse,image_single,mouse_x,mouse_y)

//draw_bars()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="122">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(snd_select,1,0)
if window_get_fullscreen(){window_set_fullscreen(false)}else{window_set_fullscreen(true)}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="118">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.screen_shot=1
{
global.screen_shot=0
}
else
{
global.screen_shot=1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="81">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
if instance_exists(areyousure){exit}
if room=room_level_boss{
audio_play_sound(snd_cant,5,0)
exit
}


if global.rage_on=0
{
if global.rage=100
{


if ((global.stache_perk1=1)or(global.stache_perk2=1)or(global.stache_perk3=1))
{
if instance_exists(player)
{
with(enemy_parent)
{
if drone_target=0{if point_distance(x,y,player.x,player.y)&lt;400{t=instance_create(x,y,chicken) t.nope=0  if random(10)&gt;7{audio_play_sound(choose(snd_bagok,snd_bagok2,snd_bagok3),1,0)} fake_death=1 instance_destroy() }}



}
}

}

t=instance_create(0,0,drama_filter)
t.txt="infinite ammo!"


t=instance_create(mouse_x,mouse_y,super_explosion)
t.hspeed=2

t=instance_create(mouse_x,mouse_y,super_explosion)
t.hspeed=-2

audio_play_sound(choose(snd_power1,snd_power2,snd_power2),1,0)
if instance_exists(player){player.mouth=30}

if global.stache_perk1=3{global.life=100 }
if global.stache_perk2=3{global.life=100 }
if global.stache_perk3=3{global.life=100 }


if global.stache_perk1=4{if global.inventory_selected&gt;0{global.ammo_per_gun[global.inventory_selected]+=5}else{global.ammo_per_gun[1]+=5}}
if global.stache_perk2=4{if global.inventory_selected&gt;0{global.ammo_per_gun[global.inventory_selected]+=5}else{global.ammo_per_gun[1]+=5}}
if global.stache_perk3=4{if global.inventory_selected&gt;0{global.ammo_per_gun[global.inventory_selected]+=5}else{global.ammo_per_gun[1]+=5}}





}
else{audio_play_sound(snd_cant,5,0)}
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="80">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if keyboard_check(ord("Q"))
{
if global.cheat=0 {global.cheat=1 keyboard_string=global.cheat_string}//else{global.cheat=0}
}
/*
global.level_im_on=10
alarm[2]=2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="79">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if global.debug_fps=0{global.debug_fps=1}else{global.debug_fps=0}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="69">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
/*
if global.paused=1{exit}
if instance_exists(player)
{
instance_create(view_xview[0]+view_wview[0]/2,view_yview[0]+view_hview[0]/2,bubble_menu)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//game_pause()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.has_joy=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>64,64</point>
    <point>64,64</point>
  </PhysicsShapePoints>
</object>
