<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_stache_meter</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-999999999</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
flash=0
flash_timer=0
done_all=0

room_speed=60
addon=2500

my_surf=surface_create(sprite_width,sprite_height)
surface_set_target(my_surf)
draw_clear_alpha(c_black,0)
surface_reset_target()

xx=global.stache_level_exp
//alarm[0]=90
//alarm[1]=60
done=0
mode=0
ii=0
yy=0
stache_card=0
ll=0

//show_message("hi")



if global.hat=0
{
    do
    {
        if ll&lt;global.stache_level
        {
            stache_card+=1
            if stache_card=5{stache_card=0}
        }
        ll+=1
    }until(ll&gt;global.stache_level)
}

if global.hat=1
{
    do
    {
        if ll&lt;global.stache_level1
        {
            stache_card+=1
            if stache_card=5{stache_card=0}
        }
        ll+=1
    }until(ll&gt;global.stache_level1)
}

if global.hat=2
{
    do
    {
        if ll&lt;global.stache_level2
        {
            stache_card+=1
            if stache_card=5{stache_card=0}
        }
        ll+=1
    }until(ll&gt;global.stache_level2)
}

if global.hat=3
{
    do
    {
        if ll&lt;global.stache_level3
        {
            stache_card+=1
            if stache_card=5{stache_card=0}
        }
        ll+=1
    }until(ll&gt;global.stache_level3)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>surface_free(my_surf)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.stache_tokens+=5
stache_card=0

c=instance_create(x,y,unlocker)
c.txt="+5 Stache Token"
c.wheel_icon=1
c.size=2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
done_all=1

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>mode=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

mode=1
alarm[2]=10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ((keyboard_check_pressed(vk_space))or(global.jump_pressed))
    {
    if done_all=0{exit}
    surface_free(my_surf)
    if global.stache_tokens&lt;1
        {
        room_goto(room_title)
        }
    else
        {
        room_goto(room_wheel)
        }
    
    instance_destroy()
    
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

x=view_xview[0]+(view_wview[0]/2)
y=view_yview[0]+(view_hview[0]/2)

draw_set_color(c_black)
draw_rectangle(view_xview[0],view_yview[0],view_xview[0]+(view_wview[0]),view_yview[0]+(view_hview[0]),0)
draw_set_color(c_white)
if surface_exists(my_surf)=false
{
my_surf=surface_create(sprite_width,sprite_height)
surface_set_target(my_surf)
draw_clear_alpha(c_black,0)
surface_reset_target()
}

if global.hat=0{if global.stache_level&gt;29{addon=0}}
if global.hat=1{if global.stache_level1&gt;29{addon=0}}
if global.hat=2{if global.stache_level2&gt;29{addon=0}}
if global.hat=3{if global.stache_level3&gt;29{addon=0}}

if global.stache_level&gt;30{ global.stache_level=30}
if global.stache_level1&gt;30{ global.stache_level1=30}
if global.stache_level2&gt;30{ global.stache_level2=30}
if global.stache_level3&gt;30{ global.stache_level3=30}


if global.hat=0
{
    repeat(global.stache_level+1)
    {
        if addon&gt;0
        {
            if xx&lt;89{xx+=(1/(global.stache_level+1))  global.stache_level_exp+=(1/(global.stache_level+1)) }
            else
            {
                xx=0
                global.stache_level_exp=0
                global.stache_level+=1
                global.stache_tokens+=1
                stache_card+=1
                if stache_card=5{alarm[3]=30}
                c=instance_create(x,y,unlocker)
                c.txt="LEVEL UP   +1 Stache Token"
                c.wheel_icon=1
                c.size=2
                audio_play_sound(snd_unlock,1,0)
            }
            
            addon-=1
        }
        else
        {
            if done=0{alarm[0]=60 done=1 }
        }
    }
}

if global.hat=1
{
    repeat(global.stache_level1+1)
    {
        if addon&gt;0
        {
            if xx&lt;89{xx+=(1/(global.stache_level1+1))  global.stache_level_exp1+=(1/(global.stache_level1+1)) }
            else
            {
                xx=0
                global.stache_level_exp1=0
                global.stache_level1+=1
                global.stache_tokens+=1
                stache_card+=1
                if stache_card=5{alarm[3]=30}
                c=instance_create(x,y,unlocker)
                c.txt="LEVEL UP   +1 Stache Token"
                c.wheel_icon=1
                c.size=2
                audio_play_sound(snd_unlock,1,0)
            }
            
            addon-=1
        }
        else
        {
            if done=0{alarm[0]=60 done=1 }
        }
    }
}

if global.hat=2
{
    repeat(global.stache_level2+1)
    {
        if addon&gt;0
        {
            if xx&lt;89{xx+=(1/(global.stache_level2+1))  global.stache_level_exp2+=(1/(global.stache_level2+1)) }
            else
            {
                xx=0
                global.stache_level_exp2=0
                global.stache_level2+=1
                global.stache_tokens+=1
                stache_card+=1
                if stache_card=5{alarm[3]=30}
                c=instance_create(x,y,unlocker)
                c.txt="LEVEL UP   +1 Stache Token"
                c.wheel_icon=1
                c.size=2
                audio_play_sound(snd_unlock,1,0)
            }
            
            addon-=1
        }
        else
        {
            if done=0{alarm[0]=60 done=1 }
        }
    }
}


if global.hat=3
{
    repeat(global.stache_level3+1)
    {
        if addon&gt;0
        {
            if xx&lt;89{xx+=(1/(global.stache_level3+1))  global.stache_level_exp3+=(1/(global.stache_level3+1)) }
            else
            {
                xx=0
                global.stache_level_exp3=0
                global.stache_level3+=1
                global.stache_tokens+=1
                stache_card+=1
                if stache_card=5{alarm[3]=30}
                c=instance_create(x,y,unlocker)
                c.txt="LEVEL UP   +1 Stache Token"
                c.wheel_icon=1
                c.size=2
                audio_play_sound(snd_unlock,1,0)
            }
            
            addon-=1
        }
        else
        {
            if done=0{alarm[0]=60 done=1 }
        }
    }
}

surface_set_target(my_surf)
draw_clear_alpha(c_black,0)
draw_set_color(c_lime)
draw_rectangle(0,0,xx,sprite_height,0)
draw_set_color(c_white)
draw_set_blend_mode(bm_subtract)
draw_sprite_ext(sprite_index,1,0,0,1,1,0,c_white,1)
draw_set_blend_mode(bm_normal)
surface_reset_target()

//if mode=1{yy-=32}
ii+=0.1
x=view_xview[0]+(view_wview[0]/2)
y=view_yview[0]+(view_hview[0]/2)


draw_sprite_ext(sprite_index,0,-(89)+view_xview[0]+(view_wview[0]/2),yy-32+view_yview[0]+(view_hview[0]/2),2,2,0,c_white,1)
draw_surface_ext(my_surf,-(89)+view_xview[0]+(view_wview[0]/2),yy-32+view_yview[0]+(view_hview[0]/2),2,2,0,c_white,1)
draw_sprite_text(view_xview[0]+(view_wview[0]/2),yy+view_yview[0]+(view_hview[0]/2)-64,"Stache Level",1,c_yellow,2)

if global.hat=0{draw_sprite_text(view_xview[0]+(view_wview[0]/2),yy+view_yview[0]+(view_hview[0]/2)+32,string(global.stache_level+1),1,c_lime,4)}
if global.hat=1{draw_sprite_text(view_xview[0]+(view_wview[0]/2),yy+view_yview[0]+(view_hview[0]/2)+32,string(global.stache_level1+1),1,c_lime,4)}
if global.hat=2{draw_sprite_text(view_xview[0]+(view_wview[0]/2),yy+view_yview[0]+(view_hview[0]/2)+32,string(global.stache_level2+1),1,c_lime,4)}
if global.hat=3{draw_sprite_text(view_xview[0]+(view_wview[0]/2),yy+view_yview[0]+(view_hview[0]/2)+32,string(global.stache_level3+1),1,c_lime,4)}




flash_timer-=1
if flash_timer&lt;0{flash_timer=30 if flash=0{flash=1}else{flash=0}}


if flash=1
{
if global.has_joy=0
{
draw_sprite_text(view_xview[0]+(view_wview[0]/2),64+yy+view_yview[0]+(view_hview[0]/2),"Press Space to continue",1,c_yellow,1)
}
else
{
draw_sprite_text(view_xview[0]+(view_wview[0]/2),64+yy+view_yview[0]+(view_hview[0]/2),"Press A to continue",1,c_yellow,1)
}
}






if done_all=0 
{
//draw_sprite_ext(spr_stache_card,stache_card,view_xview[0]+(view_wview[0]/2),yy+80+view_yview[0]+(view_hview[0]/2),2,2,sin(ii)*10,c_white,1)
//draw_sprite_ext(spr_stache_card,stache_card,view_xview[0]+(view_wview[0]/2),yy+80+view_yview[0]+(view_hview[0]/2),2,2,sin(ii)*10,c_white,1)
exit
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
